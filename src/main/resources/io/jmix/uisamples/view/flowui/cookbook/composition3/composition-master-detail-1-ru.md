
Этот пример иллюстрирует, как уменьшить вложенность диалоговых окон, используя связанные отношением мастер-деталь списки сущностей вместо верхнего уровня композиции.

Здесь вы можете увидеть ту же структуру данных, состоящую из сущностей `Airport`, `Terminal` и `MeetingPoint`, что и в [предыдущем примере]({contextPath}/sample/composition-2-levels) с двухуровневой связью. Однако список терминалов отображается рядом со списком аэропортов в формате мастер-деталь, а не внутри экрана деталей аэропорта. Это устраняет один уровень вложенных диалоговых окон, улучшая пользовательский опыт.

В этом примере аэропорты и терминалы редактируются и сохраняются независимо, а точки встречи сохраняются в базу данных только вместе с владеющим терминалом. Таким образом, отношение композиции существует только для сущностей `Terminal` и `MeetingPoint`.

Детали реализации:

- [Airport.java]({currentPath}?tab=Airport.java)
  - Атрибут `Airport.terminals` по-прежнему аннотирован с помощью `@Composition`, но в этом примере он не влияет на поведение системы и может быть опущен.

- [Terminal.java]({currentPath}?tab=Terminal.java)
  - Атрибут `Terminal.meetingPoints` аннотирован с помощью `@Composition`.

- [airport-list-view.xml]({currentPath}?tab=airport-list-view.xml)
  - Определен отдельный контейнер данных для сущности `Terminal`. Список терминалов для выбранного аэропорта загружается в контейнер с помощью JPQL-запроса с параметром `:container_airportsDc`. Этот параметр устанавливается фасетом `dataLoadCoordinator` в [автоматическом режиме]({docsBaseUrl}/flow-ui/facets/dataLoadCoordinator.html#automatic-mode).

- [AirportListView.java]({currentPath}?tab=AirportListView.java)
  - Действие `terminalsDataGridCreate` активируется только при выборе аэропорта в таблице данных аэропортов. Действие изначально отключено в [airport-list-view.xml]({currentPath}?tab=airport-list-view.xml).
  - Выбранный аэропорт устанавливается для вновь созданного терминала.

- [terminal-detail-view.xml]({currentPath}?tab=terminal-detail-view.xml)
  - Фетч-план для загрузки `Terminal` включает атрибут `Terminal.meetingPoints`.
  - Определен вложенный контейнер данных для атрибута `Terminal.meetingPoints`.
  - Таблица данных, отображающая точки встречи, подключена к этому контейнеру данных.
  - Действия `create` и `edit` таблицы данных точек встречи открывают экран деталей точки встречи в виде диалога (см. `<property name="openMode" value="DIALOG"/>`).
